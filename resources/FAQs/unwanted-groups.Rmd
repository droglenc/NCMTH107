---
layout: page
author: Derek H. Ogle
title: MTH107 FAQ
subtitle: Why do unwanted groups still appear after I have subsetted a data.frame?
---

```{r echo=FALSE, eval=FALSE}
# Renders an appropriate HTML file for the webpage
setwd("C:/aaaWork/Web/GitHub/NCMTH107/resources/FAQ/FAQs")
source("../../../rhelpers/rhelpers.R")
fnm <- "unwanted-groups"
modHTML(fnm)
```

```{r echo=FALSE, results='hide', message='FALSE'}
source("../../../rhelpers/knitr_setup.R")
```

----

Base R uses a function called `subset()` to construct subsets of a data.frame.  For example, the following code can be used to construct a data.frame for the `Iris.csv` file that contains a single species.
```{r}
df <- read.csv("data/Iris.csv")
str(df)
levels(df$species)
tmp <- subset(df,species=="versicolor")
```

A quick table of results shows that only one species remains in the data.frame.
```{r}
xtabs(~species,data=tmp)
```

But, annoyingly, the variable has maintained the names of the other species that were present in the original data.frame.  This unwanted behavior can be corrected by using `filterD()` from `FSA` (which is loaded with `NCStats`) instead of `subset()`.
```{r message=FALSE}
library(NCStats)
tmp <- filterD(df,species=="versicolor")
xtabs(~species,data=tmp)
```
